"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[389],{4635:function(e,t,n){n.d(t,{$c:function(){return m},AA:function(){return l},CP:function(){return d},Ru:function(){return o},ed:function(){return u},fR:function(){return x},n9:function(){return i}});var s=n(4165),a=n(5861),r=n(1243),c="",i=function(e){return function(){var t=(0,a.Z)((0,s.Z)().mark((function t(n){var a,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"likeRequest"}),t.next=4,r.Z.get("".concat(c,"/api/v1/post/").concat(e));case 4:a=t.sent,i=a.data,n({type:"likeSuccess",payload:i.message}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:"likeFailure",payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},l=function(e,t){return function(){var n=(0,a.Z)((0,s.Z)().mark((function n(a){var i,l;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:"addCommentRequest"}),n.next=4,r.Z.put("".concat(c,"/api/v1/post/comment/").concat(e),{comment:t},{headers:{"Content-Type":"application/json"}});case 4:i=n.sent,l=i.data,a({type:"addCommentSuccess",payload:l.message}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a({type:"addCommentFailure",payload:n.t0.response.data.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},o=function(e,t){return function(){var n=(0,a.Z)((0,s.Z)().mark((function n(a){var i,l;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:"deleteCommentRequest"}),n.next=4,r.Z.delete("".concat(c,"/api/v1/post/comment/").concat(e),{data:{commentId:t}});case 4:i=n.sent,l=i.data,a({type:"deleteCommentSuccess",payload:l.message}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a({type:"deleteCommentFailure",payload:n.t0.response.data.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},u=function(e,t){return function(){var n=(0,a.Z)((0,s.Z)().mark((function n(a){var i,l;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:"newPostRequest"}),n.next=4,r.Z.post("".concat(c,"/api/v1/post/upload"),{caption:e,image:t},{headers:{"Content-Type":"application/json"}});case 4:i=n.sent,l=i.data,a({type:"newPostSuccess",payload:l.message}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a({type:"newPostFailure",payload:n.t0.response.data.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},d=function(e,t){return function(){var n=(0,a.Z)((0,s.Z)().mark((function n(a){var i,l;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:"updateCaptionRequest"}),n.next=4,r.Z.put("".concat(c,"/api/v1/post/").concat(t),{caption:e},{headers:{"Content-Type":"application/json"}});case 4:i=n.sent,l=i.data,a({type:"updateCaptionSuccess",payload:l.message}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a({type:"updateCaptionFailure",payload:n.t0.response.data.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},m=function(){return function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"allPostsRequest"}),e.next=4,r.Z.get("".concat(c,"/api/v1/post/allposts"));case 4:n=e.sent,a=n.data,t({type:"allPostsSuccess",payload:a.posts}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"allPostsFailure",payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},x=function(e){return function(){var t=(0,a.Z)((0,s.Z)().mark((function t(n){var a,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"deletePostRequest"}),t.next=4,r.Z.delete("".concat(c,"/api/v1/post/").concat(e));case 4:a=t.sent,i=a.data,n({type:"deletePostSuccess",payload:i.message}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:"deletePostFailure",payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},5389:function(e,t,n){n.d(t,{Z:function(){return k}});var s=n(4165),a=n(5861),r=n(9439),c=n(2089),i=n(645),l=n(2426),o=n.n(l),u=n(2791),d=n(8820),m=n(7692),x=n(3728),p=n(6856),f=n(6907),h=n(9434),v=n(7689),j=n(1087),y=n(4635),w=n(7580),g=n(7425),N=n(184);function b(e){var t=e.userId,n=e.name,s=e.avatar,a=e.comment,r=e.commentId,c=e.postId,i=e.isAccount,l=e.data,u=(0,h.I0)(),m=(0,h.v9)((function(e){return e.user})).user,x=(0,h.v9)((function(e){return e.comment})),f=x.loading,v=(x.error,x.message,function(){u((0,y.Ru)(c,r)),u(i?(0,w.qp)():(0,w.KY)())});return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"my-3",children:[(0,N.jsxs)("div",{className:"flex justify-center w-[100%] xl:w-[100%] ",children:[(0,N.jsx)("div",{className:"w-[20%] md:w-[12%] lg:w-[15%] flex justify-center",children:(0,N.jsx)("img",{className:"h-[35px] w-[35px]  rounded-full",src:s,alt:""})}),(0,N.jsx)("div",{className:"flex items-center w-[80%]",children:(0,N.jsxs)("div",{className:"font-medium text-sm flex flex-col items-start space-y-1",children:[(0,N.jsx)(j.rU,{to:"user/".concat(t),children:(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsxs)("span",{className:"",children:[n,"  "]}),(0,N.jsx)("span",{children:l&&"verify"===l.user.role?(0,N.jsx)(p.Ac1,{className:"text-blue-600 mx-1 text-"}):null})]})}),(0,N.jsx)("div",{className:"flex items-center justify-between",children:(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)("p",{className:" text-xs text-gray-700 leading-relaxed break-all  ",children:a}),(0,N.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,N.jsx)("div",{className:"text-xs text-gray-400 ",children:o()(l.createdAt).fromNow()}),f?(0,N.jsx)(d.xz6,{className:"animate-spin h-5 w-5"}):(0,N.jsx)("div",{children:i||t===m._id?(0,N.jsx)("button",{onClick:v,children:(0,N.jsx)(g.qy0,{})}):null})]})]})})]})})]}),(0,N.jsx)("div",{className:"h-[1px] bg-gray-200 w-[100%]"})]})})}n(8152);function Z(e){var t=e.data,n=(0,v.TH)(),c=(0,h.v9)((function(e){return e.user})).user,i=(0,h.v9)((function(e){return e.user})).loading,l=((0,h.v9)((function(e){return e.like})).loading,(0,h.v9)((function(e){return e.followUser}))),o=l.loading,d=l.message,m=(l.error,(0,h.I0)()),x=(0,u.useState)(!1),f=(0,r.Z)(x,2),y=f[0],g=f[1],b=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/account"!==n.pathname){e.next=9;break}return console.log("You are on Account"),e.next=4,m((0,w.yN)(t._id));case 4:return e.next=6,m((0,w.II)());case 6:return e.next=8,m((0,w.qp)());case 8:g(!y);case 9:if("/"!==n.pathname){e.next=18;break}return console.log("You are on Homepage"),e.next=13,m((0,w.yN)(t._id));case 13:return e.next=15,m((0,w.KY)());case 15:return e.next=17,m((0,w.AW)());case 17:g(!y);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e=t&&t.followers.some((function(e){return String(e)===String(c._id)}));g(e)}),[c._id,t._id,t,d]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"flex items-center justify-between text-xs md:text-sm  hover:scale-105 transition duration-700 ease-in-out md:w-[100%] md:justify-between",children:[(0,N.jsx)("div",{className:"md:w-[]",children:(0,N.jsx)(j.rU,{to:"/user/".concat(t._id),children:(0,N.jsxs)("div",{className:"flex items-center justify-center my-3",children:[(0,N.jsx)("img",{className:"h-[40px] w-[40px]  rounded-full ",src:t.avatar.url,alt:""}),(0,N.jsxs)("h2",{className:"mx-3 font-medium text-sm hover:text-gray-400 ease-in-out duration-150 lg:text-base flex items-center",children:[" ",t.name.slice(0,10),"".concat(t.name.length>10?"...":"")," ","verify"===t.role?(0,N.jsx)(p.Ac1,{className:"text-blue-600 mx-1"}):null," "]})]})})}),(0,N.jsx)("div",{className:"md:w-[]",children:t&&t._id===c._id?null:(0,N.jsx)("button",{disabled:o||i,className:y?"text-black font-medium px-5 py-2 bg-gray-200 rounded-md":"text-white font-medium px-5 py-2 bg-blue-500 rounded-md",onClick:b,children:y?"Following":"Follow"})})]})})}function k(e){var t=e.data,n=e.isDelete,l=void 0!==n&&n,g=e.isAccount,k=void 0!==g&&g,C=(0,u.useState)(!1),_=(0,r.Z)(C,2),S=_[0],q=_[1],A=(0,u.useState)(!1),I=(0,r.Z)(A,2),P=I[0],F=I[1],R=(0,u.useState)(""),Y=(0,r.Z)(R,2),U=Y[0],K=Y[1],z=(0,u.useState)(!1),D=(0,r.Z)(z,2),H=D[0],T=D[1],E=(0,u.useState)(t&&t.caption),$=(0,r.Z)(E,2),V=$[0],B=$[1],L=(0,u.useState)(!1),M=(0,r.Z)(L,2),O=M[0],W=M[1],G=(0,u.useState)(!1),J=(0,r.Z)(G,2),Q=J[0],X=J[1],ee=(0,h.I0)(),te=(0,v.TH)(),ne=(0,h.v9)((function(e){return e.user})).user,se=(0,h.v9)((function(e){return e.updateCaption})).loading,ae=(0,h.v9)((function(e){return e.deletePost})).loading,re=(0,h.v9)((function(e){return e.postOfFollowing})).loading,ce=(0,h.v9)((function(e){return e.like})).loading,ie=(0,h.v9)((function(e){return e.myPosts})).loading,le=(0,h.v9)((function(e){return e.comment})).loading,oe=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!S),e.next=3,ee((0,y.n9)(t._id));case 3:k?ee((0,w.qp)()):"/explore"===te.pathname?ee((0,y.$c)()):ee((0,w.KY)());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,ee((0,y.AA)(t._id,U));case 3:k?ee((0,w.qp)()):"/explore"===te.pathname?ee((0,y.$c)()):ee((0,w.KY)()),K("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,ee((0,y.CP)(V,t._id));case 3:return e.next=5,ee((0,w.qp)());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee((0,y.fR)(t._id));case 2:return e.next=4,ee((0,w.qp)());case 4:return e.next=6,ee((0,w.II)());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){t&&t.likes.forEach((function(e){e._id===ne._id&&q(!0)}))}),[t,ne._id]),(0,N.jsx)(N.Fragment,{children:t&&(0,N.jsxs)("div",{className:"leading-loose my-3",children:[(0,N.jsxs)("div",{id:"posts",className:"flex justify-between items-center ",children:[(0,N.jsx)(j.rU,{to:"/user/".concat(t.owner._id),children:(0,N.jsxs)("div",{className:"flex items-center my-3 px-2 ",children:[(0,N.jsx)("img",{className:"h-[30px] w-[30px] md:h-[35px] md:w-[35px] lg:h-[40px] lg:w-[40px] rounded-full",src:t.owner.avatar.url,alt:"post"}),(0,N.jsxs)("h2",{className:"mx-3 font-medium text-sm hover:text-gray-400 ease-in-out duration-150 lg:text-base flex items-center",children:[t.owner.name," ","verify"===t.owner.role?(0,N.jsx)(p.Ac1,{className:"text-blue-600 mx-1"}):null," "]})]})}),k?(0,N.jsx)("div",{children:(0,N.jsxs)("button",{onClick:function(){return W(!O)},children:[" ",(0,N.jsx)(f.Ks7,{})]})}):null,(0,N.jsx)(c.Z,{open:O,onClose:function(){return W(!O)},children:(0,N.jsxs)("div",{className:" w-[80vw] h-[100%] p-2 flex flex-col items-start space-y-5",children:[Q?(0,N.jsxs)("form",{className:"w-[100%] flex items-center",onSubmit:de,children:[(0,N.jsx)("input",{className:"w-[100%] p-3 border-2 border-b-4 outline-none text-xs",type:"text",value:V,onChange:function(e){return B(e.target.value)},placeholder:"Caption Here...",required:!0}),se?(0,N.jsxs)("button",{className:"flex items-center bg-gray-200 p-2 mx-1",type:"submit",children:["Updating  ",(0,N.jsx)(d.xz6,{className:"animate-spin h-5 w-5 "})]}):(0,N.jsx)("button",{className:"flex items-center bg-gray-200 p-2 mx-1",type:"submit",children:"Update"})]}):null,Q?null:(0,N.jsxs)("button",{className:"flex items-center",onClick:function(){return X(!Q)},children:[(0,N.jsx)(p.yMw,{className:"mr-2"})," Edit"]}),ae?(0,N.jsxs)("div",{className:"animate-pulse flex items-center justify-center ",children:[(0,N.jsx)(d.xz6,{className:"animate-spin h-5 w-5 mr-3 "}),"Deleting..."]}):(0,N.jsx)("div",{children:l?(0,N.jsxs)("button",{onClick:me,className:"text-red-500 flex items-center",children:[(0,N.jsx)(d.VPh,{className:"mr-2"})," Delete"]}):null})]})})]}),(0,N.jsx)("div",{className:"w-[100%] ",children:(0,N.jsx)("img",{className:"h-[100%]  mx-auto",src:t.image.url,alt:""})}),(0,N.jsxs)("div",{className:"px-2",children:[(0,N.jsx)("div",{className:"flex justify-between items-center mt-2 ",children:(0,N.jsxs)("div",{className:"flex items-center space-x-3 ",children:[(0,N.jsx)("button",{disabled:re||ce||ie,className:"flex items-center rounded-lg hover:text-gray-400 ease-in-out duration-150",onClick:function(){oe(t._id)},children:S?(0,N.jsx)(x.b8C,{className:"text-2xl"}):(0,N.jsx)(d.lo,{className:"text-2xl"})}),(0,N.jsx)("button",{onClick:function(){return T(!H)},className:"flex items-center  rounded-lg hover:text-gray-400 ease-in-out duration-150",children:(0,N.jsx)(m.rKo,{className:"text-2xl mx-2"})})]})}),(0,N.jsxs)("button",{disabled:0===t.likes.length,onClick:function(){return F(!P)},children:[t.likes.length," likes"]}),(0,N.jsx)(c.Z,{open:P,onClose:function(){return F(!P)},children:(0,N.jsxs)("div",{className:"w-[80vw] p-2 h-[100vh] md:w-[100%]  md:px-5",children:[(0,N.jsx)("p",{className:"text-center my-3 text-xl",children:"Liked By"}),t.likes.map((function(e){return(0,N.jsx)(Z,{data:e},e._id)}))]})}),(0,N.jsxs)("p",{className:"font-medium text-base",children:[(0,N.jsxs)(j.rU,{to:"/",children:[t.owner.name,"_"]})," ",(0,N.jsxs)("span",{className:"text-sm font-normal",children:[t.caption.slice(0,100)," ",t.caption.length>100?"...":null," "]})]}),(0,N.jsxs)("button",{className:"text-sm",onClick:function(){return T(!H)},children:["View ",t.comments.length," comment"]}),(0,N.jsx)(c.Z,{open:H,onClose:function(){return T(!H)},children:(0,N.jsxs)("div",{className:"w-[100%] lg:w-[40vw] xl:w-[30vw] mx-auto space-y-5 h-[100vh] p-2 md:w-[70vw]",children:[(0,N.jsxs)("form",{className:"flex items-center",onSubmit:ue,children:[(0,N.jsx)("input",{className:"w-[100%] p-3 border border-b-4 outline-none",type:"text",value:U,onChange:function(e){return K(e.target.value)},placeholder:"Comment Here...",required:!0,disabled:le}),le?(0,N.jsx)(i.Z,{type:"submit",variant:"contained",children:(0,N.jsx)(d.xz6,{className:"animate-spin h-5 w-5"})}):(0,N.jsx)(i.Z,{type:"submit",variant:"contained",children:"Add"})]}),(0,N.jsx)("p",{className:"text-center text-2xl underline",children:"Comments"}),t.comments.length>0?t.comments.map((function(e){return(0,N.jsx)(b,{userId:e.user._id,name:e.user.name,avatar:e.user.avatar.url,comment:e.comment,commentId:e._id,postId:t._id,isAccount:k,data:e},e._id)})):(0,N.jsx)("p",{className:"text-center text-xl",children:"No comments Yet"})]})}),(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)("img",{className:"h-[30px] rounded-full border-2 shadow-xl ",src:ne.avatar.url,alt:""}),(0,N.jsx)("input",{disabled:le,className:"outline-none w-[100%] pl-2",type:"text",placeholder:"Add a comment...",value:U,onChange:function(e){return K(e.target.value)}}),le?(0,N.jsx)("div",{className:" flex items-center justify-center ",children:(0,N.jsx)(d.xz6,{className:"animate-spin h-5 w-5"})}):(0,N.jsx)(d.gYb,{onClick:ue,className:"".concat(0===U.length?"hidden":"block text-2xl cursor-pointer")})]}),(0,N.jsx)("p",{className:"text-xs text-gray-400 my-2",children:o()(t.createdAt).fromNow()})]})]})})}}}]);
//# sourceMappingURL=389.05beb5b9.chunk.js.map