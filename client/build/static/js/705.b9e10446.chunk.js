"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[705],{4635:function(e,t,n){n.d(t,{$c:function(){return d},AA:function(){return u},CP:function(){return l},Ru:function(){return p},ed:function(){return i},fR:function(){return f},n9:function(){return o}});var a=n(4165),r=n(5861),s=n(1243),c="",o=function(e){return function(){var t=(0,r.Z)((0,a.Z)().mark((function t(n){var r,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"likeRequest"}),t.next=4,s.Z.get("".concat(c,"/api/v1/post/").concat(e));case 4:r=t.sent,o=r.data,n({type:"likeSuccess",payload:o.message}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:"likeFailure",payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},u=function(e,t){return function(){var n=(0,r.Z)((0,a.Z)().mark((function n(r){var o,u;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:"addCommentRequest"}),n.next=4,s.Z.put("".concat(c,"/api/v1/post/comment/").concat(e),{comment:t},{headers:{"Content-Type":"application/json"}});case 4:o=n.sent,u=o.data,r({type:"addCommentSuccess",payload:u.message}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r({type:"addCommentFailure",payload:n.t0.response.data.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},p=function(e,t){return function(){var n=(0,r.Z)((0,a.Z)().mark((function n(r){var o,u;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:"deleteCommentRequest"}),n.next=4,s.Z.delete("".concat(c,"/api/v1/post/comment/").concat(e),{data:{commentId:t}});case 4:o=n.sent,u=o.data,r({type:"deleteCommentSuccess",payload:u.message}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r({type:"deleteCommentFailure",payload:n.t0.response.data.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},i=function(e){return function(){var t=(0,r.Z)((0,a.Z)().mark((function t(n){var r,o,u;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"newPostRequest"}),r={headers:{"Content-Type":"multipart/form-data"}},t.next=5,s.Z.post("".concat(c,"/api/v1/post/upload"),e,r);case 5:o=t.sent,u=o.data,n({type:"newPostSuccess",payload:u.message}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:"newPostFailure",payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},l=function(e,t){return function(){var n=(0,r.Z)((0,a.Z)().mark((function n(r){var o,u;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:"updateCaptionRequest"}),n.next=4,s.Z.put("".concat(c,"/api/v1/post/").concat(t),{caption:e},{headers:{"Content-Type":"application/json"}});case 4:o=n.sent,u=o.data,r({type:"updateCaptionSuccess",payload:u.message}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r({type:"updateCaptionFailure",payload:n.t0.response.data.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},d=function(){return function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"allPostsRequest"}),e.next=4,s.Z.get("".concat(c,"/api/v1/post/allposts"));case 4:n=e.sent,r=n.data,t({type:"allPostsSuccess",payload:r.posts}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"allPostsFailure",payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return function(){var t=(0,r.Z)((0,a.Z)().mark((function t(n){var r,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"deletePostRequest"}),t.next=4,s.Z.delete("".concat(c,"/api/v1/post/").concat(e));case 4:r=t.sent,o=r.data,n({type:"deletePostSuccess",payload:o.message}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:"deletePostFailure",payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},705:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(4165),r=n(5861),s=n(3433),c=n(9439),o=n(2791),u=n(9434),p=n(5206),i=n(4635),l=n(8820),d=n(184);function f(){var e=(0,u.I0)(),t=(0,u.v9)((function(e){return e.newPost})),n=t.loading,f=t.error,m=t.message,v=(0,o.useState)(""),y=(0,c.Z)(v,2),h=y[0],x=y[1],w=(0,o.useState)([]),Z=(0,c.Z)(w,2),g=Z[0],b=Z[1],k=(0,o.useState)([]),C=(0,c.Z)(k,2),j=C[0],P=C[1],S=function(){var t=(0,r.Z)((0,a.Z)().mark((function t(n){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(r=new FormData).set("caption",h),g.forEach((function(e){r.append("images",e)})),t.next=6,e((0,i.ed)(r));case 6:b(null),x(""),P([]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){f&&(p.Am.error(f,{position:"top-center",autoClose:1e3,theme:"light"}),e({type:"clearError"})),m&&(p.Am.success(m,{position:"top-center",autoClose:1e3,theme:"light"}),e({type:"clearMessage"}))}),[e,f,m]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"w-[100%] h-[auto] flex items-center justify-center mx-auto mb-20",children:(0,d.jsxs)("form",{className:"flex flex-col items-center space-y-5 md:w-[40vw] h-[auto]  md:border-2 border-gray-300 p-5",onSubmit:S,encType:"multipart/form-data",children:[(0,d.jsx)("p",{className:"text-center my-5 text-2xl font-medium underline",children:"New Post"}),(0,d.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:function(e){var t=Array.from(e.target.files);b([]),P([]),t.forEach((function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&(P((function(e){return[].concat((0,s.Z)(e),[t.result])})),b((function(e){return[].concat((0,s.Z)(e),[t.result])})))},t.readAsDataURL(e)}))}}),(0,d.jsx)("input",{className:"outline-none p-3 w-[100%] border border-gray-400",type:"text",value:h,placeholder:"Caption",onChange:function(e){x(e.target.value)}}),(0,d.jsx)("div",{className:" h-[100%] w-[100%]  flex md:flex-col  space-x-3 md:space-x-0 my-2 p-2  overflow-x-scroll ",children:(0,d.jsx)("div",{className:"flex items-center h-full ",children:j&&j.map((function(e,t){return(0,d.jsx)("img",{src:e,className:" border-2 border-white",alt:"Product Preview"},t)}))})}),n?(0,d.jsxs)("button",{disabled:n,className:"bg-blue-500 py-2 px-3 hover:bg-blue-700 duration-150 ease-in-out text-white flex items-center animate-pulse",children:["Uploading",(0,d.jsx)(l.xz6,{className:"animate-spin h-5 w-5 ml-3"})]}):(0,d.jsx)("button",{type:"submit",className:"bg-blue-500 py-2 px-3 hover:bg-blue-700 duration-150 ease-in-out text-white ",children:" Upload "})]})})})}}}]);
//# sourceMappingURL=705.b9e10446.chunk.js.map